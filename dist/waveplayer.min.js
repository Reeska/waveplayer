/*! waveplayer 2015-12-11 */

function WavePlayer(a){this.opts={src:a.src||"",container:a.container||document.body,resetPlay:a.resetPlay||!0,volume:a.volume||100},this.playing=!1,this.src=this.opts.src,this.volumeLevel=this.opts.volume,this.eventHandlers=[],this._init()}var ie=document.documentMode;WavePlayer.prototype.play=function(a){var a=a||this.src;return this._play(a),this.playing=!0,a&&(this.src=a),this},WavePlayer.prototype.stop=function(){return this._stop(),this.playing=!1,this},WavePlayer.prototype.volume=function(){arguments.length>0&&(arguments[0]<0&&(arguments[0]=0),arguments[0]>100&&(arguments[0]=100));var a=this.volumeLevel;return this.volumeLevel=parseInt(this._volume.apply(this,arguments)),a!=this.volumeLevel&&this.fireChanges("volumeLevel"),this.volumeLevel},WavePlayer.prototype.volumeDown=function(a){return this.volume(this.volume()-(a||10))},WavePlayer.prototype.volumeUp=function(a){return this.volume(this.volume()+(a||10))},WavePlayer.prototype.on=function(a,b){var c=this.eventHandlers[a]||[];return c.push(b),this.eventHandlers[a]=c,this},WavePlayer.prototype.fireChanges=function(a){if(this.eventHandlers[a]){for(var b=this.eventHandlers[a],c=0;c<b.length;c++)b[c].call(this,this[a]);return this}},ie>8?(WavePlayer.prototype._init=function(){var a=document.createElement("bgsound");a.volume=-1e4,a.balance=0,a.src=this.opts.src,this.bgsound=a,this.opts.container.appendChild(a)},WavePlayer.prototype._play=function(a){this.bgsound.volume=this._percentToVolume(this.volumeLevel),this.bgsound.src=a},WavePlayer.prototype._stop=function(a){this.bgsound.removeAttribute("src")},WavePlayer.prototype._volume=function(a){return arguments.length>0&&(this.bgsound.volume=this._percentToVolume(a)),this._volumeToPercent()},WavePlayer.prototype._percentToVolume=function(a){return 0==a?-1e4:40*(a-100)},WavePlayer.prototype._volumeToPercent=function(){return-1e4==this.bgsound.volume?0:this.bgsound.volume/40+100}):"Audio"in window?(WavePlayer.prototype._init=function(){this.audioPlayer=new Audio(this.opts.src),this.audioPlayer.volume=this._percentToVolume(this.volumeLevel)},WavePlayer.prototype._play=function(a){a!=this.src&&(this.audioPlayer.src=a),this.opts.resetPlay&&(this.audioPlayer.currentTime=0),this.audioPlayer.play()},WavePlayer.prototype._stop=function(a){this.audioPlayer.pause()},WavePlayer.prototype._playing=function(){return!this.audioPlayer.paused},WavePlayer.prototype._volume=function(a){return arguments.length>0&&(this.audioPlayer.volume=this._percentToVolume(a)),this._volumeToPercent()},WavePlayer.prototype._percentToVolume=function(a){return a/100},WavePlayer.prototype._volumeToPercent=function(){return 100*this.audioPlayer.volume}):(WavePlayer.prototype._init=function(){this.embed=this._embedding(this.opts.src)},WavePlayer.prototype._play=function(a){this.src!=a&&(this.embed.parentNode.removeChild(this.embed),this.embed=this._embedding(a)),this.embed.Play()},WavePlayer.prototype._stop=function(a){this.embed.Stop()},WavePlayer.prototype._playing=function(){return this.embed.playState>=2},WavePlayer.prototype._volume=function(a){var b=this;if(arguments.length>0){var c=this._playing();this.volumeLevel=a,this.stop(),this.embed.parentNode.removeChild(this.embed),this.embed=this._embedding(),c&&setTimeout(function(){b.play()},500)}return this._volumeToPercent()},WavePlayer.prototype._percentToVolume=function(a){return 0==a?-1e4:40*(a-100)},WavePlayer.prototype._volumeToPercent=function(){return-1e4==this.embed.volume?0:this.embed.volume/40+100},WavePlayer.prototype._embedding=function(a,b){var c=document.createElement("embed");return c.style.height=0,c.style.display="none",c.src=a||this.src,c.type="audio/wav",c.volume=this._percentToVolume(this.volumeLevel),c.autostart=!1,this.opts.container.appendChild(c),c}),window.WavePlayer=WavePlayer,jQuery&&(WavePlayer.messages={en:{play:"Play",stop:"Stop",volume:"Volume control"},fr:{play:"Lecture",stop:"Stop",volume:"Contr√¥le du volume"}},function(a){a.fn.wavePlayer=function(b){var b=a.extend({lang:"en",label:"",volumectrl:!0},b),c=WavePlayer.messages[b.lang];return this.each(function(){var d=a(this),e=d.data(),f=a.extend({},b,e),g=new WavePlayer({container:d[0],src:f.src,volume:f.volume});d.append('<div class="wave-inner">						<span class="wave-buttons">							<a href="#" class="wave-action wave-play" alt="'+c.play+'" title="'+c.play+'" tabindex="'+(f.tabindex||"")+'"></a> 							<a href="#" class="wave-action wave-stop" alt="'+c.stop+'" title="'+c.stop+'" tabindex="'+(f.tabindex||"")+'"></a> 						'+(f.volumectrl?'<span class="wave-volume" title="'+c.volume+'"><span class="wave-volume-label"></span><span class="wave-volume-level"></span></span>':"")+"						"+(f.label?'<span class="wave-label wave-play">'+f.label+"</span>":"")+"						</span> 					</div>");var h=a(".wave-volume",d),i=a(".wave-volume-level",h),j=a(".wave-volume-label",h);return g.on("volumeLevel",function(a){i.css({width:a+"%"}),j.text(a)}).fireChanges("volumeLevel"),h.bind("mousemove click",function(a){if((void 0!==a.buttons||a.button)&&(void 0===a.buttons||a.buttons)||"click"==a.type){var b=h.width()-1,c=a.offsetX,d=parseInt(100*c/b);return g.volume(d),!1}}),d.delegate(".wave-play","click",function(){return g.play(e.src),!1}).delegate(".wave-stop","click",function(){return g.stop(),!1}).delegate(".wave-vol-up","click",function(){return g.volumeUp(),!1}).delegate(".wave-vol-down","click",function(){return g.volumeDown(),!1}),d})}}(jQuery));
//# sourceMappingURL=waveplayer.min.js.map